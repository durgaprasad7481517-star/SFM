<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Finance Manager Pro - Enterprise Financial Analytics Platform</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #1e40af;
            --secondary-color: #3b82f6;
            --accent-color: #06b6d4;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --dark-color: #1f2937;
            --light-color: #f8fafc;
            --white: #ffffff;
            --gray-100: #f1f5f9;
            --gray-200: #e2e8f0;
            --gray-300: #cbd5e1;
            --gray-400: #94a3b8;
            --gray-500: #64748b;
            --gray-600: #475569;
            --gray-700: #334155;
            --gray-800: #1e293b;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh;
            color: var(--gray-800);
            line-height: 1.6;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 24px;
        }

        /* Header Styles */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.125);
            border-radius: 24px;
            padding: 40px;
            margin-bottom: 32px;
            box-shadow: var(--shadow-xl);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="8" height="8" patternUnits="userSpaceOnUse"><path d="M 8 0 L 0 0 0 8" fill="none" stroke="%23e2e8f0" stroke-width="0.5" opacity="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.4;
            z-index: 0;
        }

        .header-content {
            position: relative;
            z-index: 1;
            text-align: center;
        }

        .header h1 {
            font-size: 3.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 16px;
            letter-spacing: -0.025em;
        }

        .header .subtitle {
            font-size: 1.25rem;
            color: var(--gray-600);
            font-weight: 500;
            margin-bottom: 24px;
        }

        .header-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 24px;
            margin-top: 32px;
        }

        .header-stat {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 16px;
            padding: 24px;
            text-align: center;
            border: 1px solid var(--gray-200);
        }

        .header-stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 8px;
        }

        .header-stat-label {
            font-size: 0.875rem;
            color: var(--gray-500);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 8px;
            margin-bottom: 32px;
            box-shadow: var(--shadow-md);
            overflow-x: auto;
        }

        .nav-tab {
            flex: 1;
            padding: 12px 24px;
            border: none;
            background: transparent;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-width: 140px;
        }

        .nav-tab.active {
            background: var(--primary-color);
            color: white;
            box-shadow: var(--shadow-md);
        }

        .nav-tab:not(.active) {
            color: var(--gray-600);
        }

        .nav-tab:hover:not(.active) {
            background: var(--gray-100);
            color: var(--gray-800);
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Card Styles */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.125);
            border-radius: 20px;
            padding: 32px;
            box-shadow: var(--shadow-lg);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), var(--accent-color));
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }

        .card-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        }

        .card h3 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--gray-800);
        }

        .card-actions {
            display: flex;
            gap: 8px;
        }

        /* Form Styles */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-label {
            font-weight: 600;
            color: var(--gray-700);
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .form-input, .form-select {
            padding: 16px;
            border: 2px solid var(--gray-200);
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1);
        }

        /* Button Styles */
        .btn {
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-decoration: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: var(--gray-100);
            color: var(--gray-700);
            border: 1px solid var(--gray-300);
        }

        .btn-secondary:hover {
            background: var(--gray-200);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success-color), #059669);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning-color), #d97706);
            color: white;
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 0.875rem;
        }

        /* Expense List */
        .expense-list {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 24px;
        }

        .expense-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            margin-bottom: 12px;
            background: var(--gray-50);
            border-radius: 16px;
            border-left: 4px solid var(--primary-color);
            transition: all 0.3s ease;
        }

        .expense-item:hover {
            background: white;
            box-shadow: var(--shadow-md);
        }

        .expense-details {
            flex: 1;
        }

        .expense-amount {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--danger-color);
            margin-bottom: 4px;
        }

        .expense-description {
            color: var(--gray-600);
            font-weight: 500;
        }

        .expense-category {
            display: inline-block;
            padding: 4px 12px;
            background: var(--primary-color);
            color: white;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-top: 8px;
        }

        .expense-date {
            font-size: 0.875rem;
            color: var(--gray-500);
            text-align: right;
        }

        /* Budget Overview */
        .budget-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .budget-metric {
            text-align: center;
            padding: 24px;
            background: linear-gradient(135deg, var(--gray-50), white);
            border-radius: 16px;
            border: 1px solid var(--gray-200);
        }

        .budget-metric-value {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 8px;
        }

        .budget-metric-label {
            font-size: 0.875rem;
            color: var(--gray-500);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .budget-metric.total .budget-metric-value { color: var(--primary-color); }
        .budget-metric.spent .budget-metric-value { color: var(--danger-color); }
        .budget-metric.remaining .budget-metric-value { color: var(--success-color); }

        /* Progress Bar */
        .progress-container {
            margin: 24px 0;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .progress-label {
            font-weight: 600;
            color: var(--gray-700);
        }

        .progress-percentage {
            font-weight: 700;
            color: var(--primary-color);
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: var(--gray-200);
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success-color), var(--warning-color), var(--danger-color));
            transition: width 0.6s ease;
            border-radius: 6px;
        }

        /* Alerts */
        .alert {
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 16px;
            font-weight: 500;
        }

        .alert-success {
            background: linear-gradient(135deg, #ecfdf5, #d1fae5);
            color: var(--success-color);
            border: 1px solid #a7f3d0;
        }

        .alert-warning {
            background: linear-gradient(135deg, #fffbeb, #fef3c7);
            color: var(--warning-color);
            border: 1px solid #fde68a;
        }

        .alert-danger {
            background: linear-gradient(135deg, #fef2f2, #fecaca);
            color: var(--danger-color);
            border: 1px solid #fca5a5;
        }

        .alert-icon {
            font-size: 1.5rem;
        }

        /* Goals */
        .goal-item {
            padding: 24px;
            background: linear-gradient(135deg, #faf5ff, #f3e8ff);
            border-radius: 16px;
            margin-bottom: 20px;
            border: 1px solid #e9d5ff;
        }

        .goal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .goal-name {
            font-weight: 700;
            font-size: 1.125rem;
            color: var(--gray-800);
        }

        .goal-amount {
            font-weight: 700;
            color: #7c3aed;
        }

        .goal-actions {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }

        /* Charts */
        .chart-container {
            position: relative;
            height: 350px;
            margin-top: 24px;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-title {
            font-weight: 700;
            color: var(--gray-800);
        }

        .chart-period {
            display: flex;
            gap: 8px;
        }

        .period-btn {
            padding: 8px 16px;
            border: 1px solid var(--gray-300);
            background: white;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .period-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* Analytics Cards */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .analytics-card {
            background: linear-gradient(135deg, white, var(--gray-50));
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--gray-200);
            text-align: center;
        }

        .analytics-value {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .analytics-label {
            font-size: 0.875rem;
            color: var(--gray-500);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .analytics-change {
            margin-top: 8px;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .analytics-change.positive {
            color: var(--success-color);
        }

        .analytics-change.negative {
            color: var(--danger-color);
        }

        /* Prediction Card */
        .prediction-card {
            background: linear-gradient(135deg, #1e1b4b, #312e81);
            color: white;
            border-radius: 20px;
            padding: 32px;
            margin-top: 24px;
            position: relative;
            overflow: hidden;
        }

        .prediction-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
        }

        .prediction-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .prediction-amount {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 8px;
        }

        .prediction-subtitle {
            opacity: 0.8;
            font-size: 0.875rem;
        }

        /* AI Insights Styles */
        .ai-insight-card {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            border: 1px solid var(--gray-200);
        }

        .ai-insight-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .ai-insight-header h4 {
            font-weight: 700;
            color: var(--gray-800);
            margin: 0;
        }

        .ai-recommendations {
            list-style: none;
            padding: 0;
        }

        .ai-recommendations li {
            padding: 12px 0;
            border-bottom: 1px solid var(--gray-200);
            color: var(--gray-700);
            position: relative;
            padding-left: 24px;
        }

        .ai-recommendations li:before {
            content: '‚Ä¢';
            color: var(--primary-color);
            font-weight: bold;
            position: absolute;
            left: 0;
        }

        .ai-recommendations li:last-child {
            border-bottom: none;
        }

        .pattern-analysis {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .pattern-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: white;
            border-radius: 8px;
            border: 1px solid var(--gray-200);
        }

        .pattern-label {
            font-weight: 600;
            color: var(--gray-600);
        }

        .pattern-value {
            font-weight: 700;
            color: var(--primary-color);
        }

        /* AI Chat Styles */
        .ai-chat-container {
            margin-top: 32px;
            border: 1px solid var(--gray-200);
            border-radius: 16px;
            overflow: hidden;
        }

        .ai-chat-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 16px 24px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
        }

        .ai-chat-messages {
            height: 300px;
            overflow-y: auto;
            padding: 20px;
            background: var(--gray-50);
        }

        .ai-message {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        .user-message {
            flex-direction: row-reverse;
        }

        .ai-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
        }

        .user-avatar {
            background: linear-gradient(135deg, var(--success-color), #059669);
        }

        .ai-text {
            background: white;
            padding: 12px 16px;
            border-radius: 16px;
            max-width: 70%;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-200);
        }

        .user-text {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .ai-chat-input {
            display: flex;
            padding: 16px;
            background: white;
            border-top: 1px solid var(--gray-200);
            gap: 12px;
        }

        .ai-chat-input .form-input {
            flex: 1;
            margin: 0;
        }

        /* Prediction Styles */
        .prediction-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .prediction-item {
            background: linear-gradient(135deg, white, var(--gray-50));
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--gray-200);
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .prediction-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--accent-color), #0891b2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }

        .prediction-content {
            flex: 1;
        }

        .prediction-title {
            font-size: 0.875rem;
            color: var(--gray-500);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 4px;
        }

        .prediction-value {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--gray-800);
            margin-bottom: 4px;
        }

        .prediction-confidence {
            font-size: 0.75rem;
            color: var(--gray-500);
        }

        /* Roadmap Styles */
        .roadmap-container {
            position: relative;
        }

        .roadmap-item {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 24px 0;
            position: relative;
        }

        .roadmap-item:not(:last-child)::after {
            content: '';
            position: absolute;
            left: 24px;
            top: 80px;
            width: 2px;
            height: 40px;
            background: var(--gray-300);
        }

        .roadmap-item.completed::after {
            background: var(--success-color);
        }

        .roadmap-item.active::after {
            background: linear-gradient(to bottom, var(--primary-color), var(--gray-300));
        }

        .roadmap-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            z-index: 1;
        }

        .roadmap-item.completed .roadmap-icon {
            background: var(--success-color);
        }

        .roadmap-item.active .roadmap-icon {
            background: var(--primary-color);
        }

        .roadmap-item:not(.completed):not(.active) .roadmap-icon {
            background: var(--gray-400);
        }

        .roadmap-content h4 {
            font-weight: 700;
            color: var(--gray-800);
            margin-bottom: 8px;
        }

        .roadmap-content p {
            color: var(--gray-600);
            margin-bottom: 8px;
        }

        .roadmap-progress {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        /* Calculator Styles */
        .calculator-tabs {
            display: flex;
            background: var(--gray-100);
            border-radius: 12px;
            padding: 4px;
            margin-bottom: 24px;
        }

        .calc-tab {
            flex: 1;
            padding: 12px 16px;
            border: none;
            background: transparent;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.875rem;
        }

        .calc-tab.active {
            background: white;
            color: var(--primary-color);
            box-shadow: var(--shadow-sm);
        }

        .calc-tab:not(.active) {
            color: var(--gray-600);
        }

        .calculator-content {
            display: none;
        }

        .calculator-content.active {
            display: block;
        }

        .calculator-result {
            margin-top: 24px;
            padding: 24px;
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border-radius: 16px;
            border: 1px solid #bae6fd;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #bae6fd;
        }

        .result-item:last-child {
            border-bottom: none;
            font-weight: 700;
            font-size: 1.125rem;
            color: var(--primary-color);
        }

        .result-label {
            color: var(--gray-600);
        }

        .result-value {
            font-weight: 600;
            color: var(--gray-800);
        }

        /* Report History Styles */
        .report-history {
            max-height: 400px;
            overflow-y: auto;
        }

        .report-history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            margin-bottom: 12px;
            background: var(--gray-50);
            border-radius: 12px;
            border: 1px solid var(--gray-200);
            transition: all 0.3s ease;
        }

        .report-history-item:hover {
            background: white;
            box-shadow: var(--shadow-md);
        }

        .report-name {
            font-weight: 600;
            color: var(--gray-800);
            margin-bottom: 4px;
        }

        .report-date {
            font-size: 0.875rem;
            color: var(--gray-500);
        }

        .report-actions {
            display: flex;
            gap: 8px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }

            .header h1 {
                font-size: 2.5rem;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .nav-tabs {
                flex-direction: column;
            }

            .budget-metrics {
                grid-template-columns: repeat(2, 1fr);
            }

            .analytics-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--gray-100);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gray-400);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gray-500);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <h1><i class="fas fa-graduation-cap"></i> Student Finance Manager Pro</h1>
                <p class="subtitle">Enterprise AI-Powered Financial Analytics & Strategic Planning Platform</p>
                
                <div class="header-stats">
                    <div class="header-stat">
                        <div class="header-stat-value" id="headerTotalBudget">$1,500</div>
                        <div class="header-stat-label">Monthly Budget</div>
                    </div>
                    <div class="header-stat">
                        <div class="header-stat-value" id="headerTotalSpent">$0</div>
                        <div class="header-stat-label">Total Spent</div>
                    </div>
                    <div class="header-stat">
                        <div class="header-stat-value" id="headerSavingsRate">0%</div>
                        <div class="header-stat-label">Savings Rate</div>
                    </div>
                    <div class="header-stat">
                        <div class="header-stat-value" id="headerActiveGoals">0</div>
                        <div class="header-stat-label">Active Goals</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('dashboard')">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </button>
            <button class="nav-tab" onclick="switchTab('expenses')">
                <i class="fas fa-receipt"></i> Expense Tracker
            </button>
            <button class="nav-tab" onclick="switchTab('budget')">
                <i class="fas fa-chart-pie"></i> Budget Manager
            </button>
            <button class="nav-tab" onclick="switchTab('goals')">
                <i class="fas fa-bullseye"></i> Financial Goals
            </button>
            <button class="nav-tab" onclick="switchTab('analytics')">
                <i class="fas fa-chart-line"></i> Analytics
            </button>
            <button class="nav-tab" onclick="switchTab('insights')">
                <i class="fas fa-brain"></i> AI Insights
            </button>
            <button class="nav-tab" onclick="switchTab('planning')">
                <i class="fas fa-calendar-check"></i> Financial Planning
            </button>
            <button class="nav-tab" onclick="switchTab('reports')">
                <i class="fas fa-file-alt"></i> Reports
            </button>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="analytics-grid">
                <div class="analytics-card">
                    <div class="analytics-value" id="dashAvgDaily">$0</div>
                    <div class="analytics-label">Average Daily Spend</div>
                    <div class="analytics-change positive" id="dailyChange">+0% from last week</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-value" id="dashTopCategory">-</div>
                    <div class="analytics-label">Top Spending Category</div>
                    <div class="analytics-change" id="categoryChange">This month</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-value" id="dashBudgetHealth">100%</div>
                    <div class="analytics-label">Budget Health Score</div>
                    <div class="analytics-change positive" id="healthChange">Excellent</div>
                </div>
                <div class="analytics-card">
                    <div class="analytics-value" id="dashProjectedSavings">$0</div>
                    <div class="analytics-label">Projected Monthly Savings</div>
                    <div class="analytics-change" id="savingsChange">Based on current trends</div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon"><i class="fas fa-chart-area"></i></div>
                            <h3>Spending Trends</h3>
                        </div>
                        <div class="chart-period">
                            <button class="period-btn active" onclick="updateChartPeriod('7d')">7D</button>
                            <button class="period-btn" onclick="updateChartPeriod('30d')">30D</button>
                            <button class="period-btn" onclick="updateChartPeriod('90d')">90D</button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="dashboardSpendingChart"></canvas>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon"><i class="fas fa-chart-pie"></i></div>
                            <h3>Category Breakdown</h3>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="dashboardCategoryChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="prediction-card">
                <div class="prediction-title">
                    <i class="fas fa-crystal-ball"></i>
                    AI Financial Prediction
                </div>
                <div class="prediction-amount" id="dashPrediction">$0</div>
                <div class="prediction-subtitle">Estimated spending for next month based on AI analysis of your patterns</div>
            </div>
        </div>

        <!-- Expenses Tab -->
        <div id="expenses" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon"><i class="fas fa-plus-circle"></i></div>
                        <h3>Add New Expense</h3>
                    </div>
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Amount</label>
                        <input type="number" id="expenseAmount" class="form-input" placeholder="0.00" step="0.01">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Category</label>
                        <select id="expenseCategory" class="form-select">
                            <option value="">Select Category</option>
                            <option value="food">üçï Food & Dining</option>
                            <option value="transport">üöó Transportation</option>
                            <option value="books">üìö Books & Supplies</option>
                            <option value="entertainment">üé¨ Entertainment</option>
                            <option value="housing">üè† Housing & Utilities</option>
                            <option value="health">‚öïÔ∏è Health & Fitness</option>
                            <option value="shopping">üõçÔ∏è Shopping</option>
                            <option value="other">üì¶ Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <input type="text" id="expenseDescription" class="form-input" placeholder="What did you spend on?">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Date</label>
                        <input type="date" id="expenseDate" class="form-input">
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="addExpense()">
                    <i class="fas fa-plus"></i> Add Expense
                </button>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon"><i class="fas fa-list"></i></div>
                        <h3>Recent Expenses</h3>
                    </div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="exportExpenses()">
                            <i class="fas fa-download"></i> Export
                        </button>
                    </div>
                </div>
                
                <div class="expense-list" id="expenseList">
                    <!-- Expenses will be populated here -->
                </div>
            </div>
        </div>

        <!-- Budget Tab -->
        <div id="budget" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon"><i class="fas fa-wallet"></i></div>
                        <h3>Budget Overview</h3>
                    </div>
                    <div class="card-actions">
                        <button class="btn btn-secondary btn-sm" onclick="editBudget()">
                            <i class="fas fa-edit"></i> Edit Budget
                        </button>
                    </div>
                </div>

                <div class="budget-metrics">
                    <div class="budget-metric total">
                        <div class="budget-metric-value" id="budgetTotal">$1,500</div>
                        <div class="budget-metric-label">Monthly Budget</div>
                    </div>
                    <div class="budget-metric spent">
                        <div class="budget-metric-value" id="budgetSpent">$0</div>
                        <div class="budget-metric-label">Total Spent</div>
                    </div>
                    <div class="budget-metric remaining">
                        <div class="budget-metric-value" id="budgetRemaining">$1,500</div>
                        <div class="budget-metric-label">Remaining</div>
                    </div>
                </div>

                <div class="progress-container">
                    <div class="progress-header">
                        <span class="progress-label">Budget Usage</span>
                        <span class="progress-percentage" id="budgetPercentage">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="budgetProgressFill" style="width: 0%"></div>
                    </div>
                </div>

                <div id="budgetAlerts"></div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon"><i class="fas fa-chart-bar"></i></div>
                        <h3>Category Budgets</h3>
                    </div>
                </div>
                
                <div id="categoryBudgets">
                    <!-- Category budgets will be populated here -->
                </div>
            </div>
        </div>

        <!-- Goals Tab -->
        <div id="goals" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon"><i class="fas fa-target"></i></div>
                        <h3>Create New Goal</h3>
                    </div>
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Goal Name</label>
                        <input type="text" id="goalName" class="form-input" placeholder="e.g., Emergency Fund">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Target Amount</label>
                        <input type="number" id="goalAmount" class="form-input" placeholder="0.00" step="0.01">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Target Date</label>
                        <input type="date" id="goalDate" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Priority</label>
                        <select id="goalPriority" class="form-select">
                            <option value="high">High Priority</option>
                            <option value="medium">Medium Priority</option>
                            <option value="low">Low Priority</option>
                        </select>
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="addGoal()">
                    <i class="fas fa-plus"></i> Create Goal
                </button>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon"><i class="fas fa-list-check"></i></div>
                        <h3>Your Financial Goals</h3>
                    </div>
                </div>
                
                <div id="goalsList">
                    <!-- Goals will be populated here -->
                </div>
            </div>
        </div>

        <!-- Analytics Tab -->
        <div id="analytics" class="tab-content">
            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon"><i class="fas fa-chart-line"></i></div>
                            <h3>Monthly Trends</h3>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="monthlyTrendsChart"></canvas>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon"><i class="fas fa-calendar-alt"></i></div>
                            <h3>Weekly Patterns</h3>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="weeklyPatternsChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Insights Tab -->
        <div id="insights" class="tab-content">
            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon" style="background: linear-gradient(135deg, #8b5cf6, #a855f7);"><i class="fas fa-robot"></i></div>
                            <h3>AI Financial Assistant</h3>
                        </div>
                    </div>
                    
                    <div id="aiInsights">
                        <div class="ai-insight-card">
                            <div class="ai-insight-header">
                                <i class="fas fa-lightbulb" style="color: #f59e0b;"></i>
                                <h4>Smart Recommendations</h4>
                            </div>
                            <ul class="ai-recommendations">
                                <li>Consider reducing food expenses by 15% to meet your savings goal faster</li>
                                <li>Your transportation costs are 20% below average - great job!</li>
                                <li>Set up automatic transfers of $150/month to reach your emergency fund goal</li>
                            </ul>
                        </div>
                        
                        <div class="ai-insight-card">
                            <div class="ai-insight-header">
                                <i class="fas fa-chart-trend-up" style="color: #10b981;"></i>
                                <h4>Spending Pattern Analysis</h4>
                            </div>
                            <div class="pattern-analysis">
                                <div class="pattern-item">
                                    <span class="pattern-label">Peak Spending Day:</span>
                                    <span class="pattern-value">Friday (avg $45)</span>
                                </div>
                                <div class="pattern-item">
                                    <span class="pattern-label">Most Efficient Day:</span>
                                    <span class="pattern-value">Tuesday (avg $18)</span>
                                </div>
                                <div class="pattern-item">
                                    <span class="pattern-label">Monthly Trend:</span>
                                    <span class="pattern-value">Decreasing by 8%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="ai-chat-container">
                        <div class="ai-chat-header">
                            <i class="fas fa-comments"></i>
                            <span>Ask Your AI Financial Advisor</span>
                        </div>
                        <div class="ai-chat-messages" id="aiChatMessages">
                            <div class="ai-message">
                                <div class="ai-avatar"><i class="fas fa-robot"></i></div>
                                <div class="ai-text">Hello! I'm your AI financial advisor. Ask me anything about your spending, budgets, or financial goals!</div>
                            </div>
                        </div>
                        <div class="ai-chat-input">
                            <input type="text" id="aiChatInput" placeholder="Ask about your finances..." class="form-input">
                            <button class="btn btn-primary" onclick="sendAIMessage()">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon" style="background: linear-gradient(135deg, #06b6d4, #0891b2);"><i class="fas fa-crystal-ball"></i></div>
                            <h3>Predictive Analytics</h3>
                        </div>
                    </div>
                    
                    <div class="prediction-grid">
                        <div class="prediction-item">
                            <div class="prediction-icon"><i class="fas fa-calendar-alt"></i></div>
                            <div class="prediction-content">
                                <div class="prediction-title">Next Month Forecast</div>
                                <div class="prediction-value">$1,245</div>
                                <div class="prediction-confidence">87% confidence</div>
                            </div>
                        </div>
                        
                        <div class="prediction-item">
                            <div class="prediction-icon"><i class="fas fa-piggy-bank"></i></div>
                            <div class="prediction-content">
                                <div class="prediction-title">Savings Potential</div>
                                <div class="prediction-value">$255</div>
                                <div class="prediction-confidence">Based on current trends</div>
                            </div>
                        </div>
                        
                        <div class="prediction-item">
                            <div class="prediction-icon"><i class="fas fa-exclamation-triangle"></i></div>
                            <div class="prediction-content">
                                <div class="prediction-title">Budget Risk</div>
                                <div class="prediction-value">Low</div>
                                <div class="prediction-confidence">15% overspend chance</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="predictionChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Financial Planning Tab -->
        <div id="planning" class="tab-content">
            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);"><i class="fas fa-map-marked-alt"></i></div>
                            <h3>Financial Roadmap</h3>
                        </div>
                    </div>
                    
                    <div class="roadmap-container">
                        <div class="roadmap-item completed">
                            <div class="roadmap-icon"><i class="fas fa-check"></i></div>
                            <div class="roadmap-content">
                                <h4>Emergency Fund Started</h4>
                                <p>Build $500 emergency fund</p>
                                <div class="roadmap-progress">100% Complete</div>
                            </div>
                        </div>
                        
                        <div class="roadmap-item active">
                            <div class="roadmap-icon"><i class="fas fa-play"></i></div>
                            <div class="roadmap-content">
                                <h4>Budget Optimization</h4>
                                <p>Reduce monthly expenses by 10%</p>
                                <div class="roadmap-progress">65% Complete</div>
                            </div>
                        </div>
                        
                        <div class="roadmap-item">
                            <div class="roadmap-icon"><i class="fas fa-clock"></i></div>
                            <div class="roadmap-content">
                                <h4>Investment Planning</h4>
                                <p>Start investing $200/month</p>
                                <div class="roadmap-progress">Upcoming</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon" style="background: linear-gradient(135deg, #ef4444, #dc2626);"><i class="fas fa-calculator"></i></div>
                            <h3>Financial Calculators</h3>
                        </div>
                    </div>
                    
                    <div class="calculator-tabs">
                        <button class="calc-tab active" onclick="switchCalculator('savings')">Savings Calculator</button>
                        <button class="calc-tab" onclick="switchCalculator('loan')">Loan Calculator</button>
                        <button class="calc-tab" onclick="switchCalculator('budget')">Budget Planner</button>
                    </div>
                    
                    <div id="savingsCalculator" class="calculator-content active">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Monthly Savings</label>
                                <input type="number" id="monthlySavings" class="form-input" placeholder="200" value="200">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Time Period (months)</label>
                                <input type="number" id="savingsTime" class="form-input" placeholder="12" value="12">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Interest Rate (%)</label>
                                <input type="number" id="interestRate" class="form-input" placeholder="2.5" value="2.5" step="0.1">
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="calculateSavings()">Calculate</button>
                        <div id="savingsResult" class="calculator-result"></div>
                    </div>
                    
                    <div id="loanCalculator" class="calculator-content">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Loan Amount</label>
                                <input type="number" id="loanAmount" class="form-input" placeholder="5000">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Interest Rate (%)</label>
                                <input type="number" id="loanRate" class="form-input" placeholder="5.5" step="0.1">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Term (months)</label>
                                <input type="number" id="loanTerm" class="form-input" placeholder="24">
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="calculateLoan()">Calculate</button>
                        <div id="loanResult" class="calculator-result"></div>
                    </div>
                    
                    <div id="budgetCalculator" class="calculator-content">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Monthly Income</label>
                                <input type="number" id="monthlyIncome" class="form-input" placeholder="2000">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Fixed Expenses</label>
                                <input type="number" id="fixedExpenses" class="form-input" placeholder="800">
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="calculateBudget()">Calculate</button>
                        <div id="budgetResult" class="calculator-result"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reports Tab -->
        <div id="reports" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon"><i class="fas fa-file-chart-line"></i></div>
                        <h3>Advanced Financial Reports</h3>
                    </div>
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Report Type</label>
                        <select id="reportType" class="form-select">
                            <option value="executive">Executive Summary</option>
                            <option value="detailed">Detailed Analysis</option>
                            <option value="category">Category Breakdown</option>
                            <option value="goals">Goals Progress</option>
                            <option value="trends">Spending Trends</option>
                            <option value="forecast">Financial Forecast</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Period</label>
                        <select id="reportPeriod" class="form-select">
                            <option value="current">Current Month</option>
                            <option value="last">Last Month</option>
                            <option value="quarter">Last 3 Months</option>
                            <option value="year">Last 12 Months</option>
                            <option value="custom">Custom Range</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Format</label>
                        <select id="reportFormat" class="form-select">
                            <option value="interactive">Interactive Report</option>
                            <option value="pdf">PDF Document</option>
                            <option value="excel">Excel Spreadsheet</option>
                            <option value="csv">CSV Data</option>
                        </select>
                    </div>
                </div>
                
                <div style="display: flex; gap: 16px; margin-top: 24px;">
                    <button class="btn btn-primary" onclick="generateAdvancedReport()">
                        <i class="fas fa-chart-bar"></i> Generate Report
                    </button>
                    <button class="btn btn-secondary" onclick="scheduleReport()">
                        <i class="fas fa-clock"></i> Schedule Report
                    </button>
                    <button class="btn btn-secondary" onclick="exportReport()">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
                
                <div id="reportContent" style="margin-top: 32px;">
                    <!-- Report content will be generated here -->
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <div class="card-icon"><i class="fas fa-history"></i></div>
                        <h3>Report History</h3>
                    </div>
                </div>
                
                <div class="report-history">
                    <div class="report-history-item">
                        <div class="report-info">
                            <div class="report-name">Monthly Executive Summary - March 2024</div>
                            <div class="report-date">Generated on March 31, 2024</div>
                        </div>
                        <div class="report-actions">
                            <button class="btn btn-secondary btn-sm">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="btn btn-secondary btn-sm">
                                <i class="fas fa-download"></i> Download
                            </button>
                        </div>
                    </div>
                    
                    <div class="report-history-item">
                        <div class="report-info">
                            <div class="report-name">Category Analysis - Q1 2024</div>
                            <div class="report-date">Generated on March 28, 2024</div>
                        </div>
                        <div class="report-actions">
                            <button class="btn btn-secondary btn-sm">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="btn btn-secondary btn-sm">
                                <i class="fas fa-download"></i> Download
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let expenses = JSON.parse(localStorage.getItem('expenses')) || [];
        let goals = JSON.parse(localStorage.getItem('goals')) || [];
        let monthlyBudget = parseFloat(localStorage.getItem('monthlyBudget')) || 1500;
        let categoryBudgets = JSON.parse(localStorage.getItem('categoryBudgets')) || {};
        
        // Charts
        let dashboardSpendingChart, dashboardCategoryChart, monthlyTrendsChart, weeklyPatternsChart, predictionChart;
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Set today's date as default
            document.getElementById('expenseDate').value = new Date().toISOString().split('T')[0];
            
            // Initialize with sample data if empty
            if (expenses.length === 0) {
                initializeSampleData();
            }
            
            // Update all UI components
            updateAllComponents();
            initializeCharts();
            
            // Add AI chat input handler
            const aiChatInput = document.getElementById('aiChatInput');
            if (aiChatInput) {
                aiChatInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        sendAIMessage();
                    }
                });
            }
        });

        function initializeSampleData() {
            const sampleExpenses = [
                { amount: 45.50, category: 'food', description: 'Lunch at campus restaurant', date: new Date(Date.now() - 86400000 * 1) },
                { amount: 25.00, category: 'transport', description: 'Weekly bus pass', date: new Date(Date.now() - 86400000 * 2) },
                { amount: 180.00, category: 'books', description: 'Advanced Mathematics textbook', date: new Date(Date.now() - 86400000 * 3) },
                { amount: 35.75, category: 'entertainment', description: 'Movie night with friends', date: new Date(Date.now() - 86400000 * 4) },
                { amount: 65.20, category: 'food', description: 'Weekly groceries', date: new Date(Date.now() - 86400000 * 5) },
                { amount: 15.00, category: 'health', description: 'Gym day pass', date: new Date(Date.now() - 86400000 * 6) },
                { amount: 120.00, category: 'shopping', description: 'Winter jacket', date: new Date(Date.now() - 86400000 * 7) }
            ];
            
            const sampleGoals = [
                { name: 'Emergency Fund', target: 2000, current: 450, priority: 'high', date: '2024-12-31' },
                { name: 'New Laptop for Studies', target: 1200, current: 380, priority: 'high', date: '2024-06-30' },
                { name: 'Summer Internship Fund', target: 800, current: 200, priority: 'medium', date: '2024-05-15' },
                { name: 'Study Abroad Program', target: 5000, current: 750, priority: 'medium', date: '2025-01-15' }
            ];

            expenses = sampleExpenses;
            goals = sampleGoals;
            
            // Save to localStorage
            localStorage.setItem('expenses', JSON.stringify(expenses));
            localStorage.setItem('goals', JSON.stringify(goals));
        }

        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all nav tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked nav tab
            event.target.classList.add('active');
            
            // Update charts if switching to analytics
            if (tabName === 'analytics') {
                setTimeout(() => {
                    updateAnalyticsCharts();
                }, 100);
            }
        }

        function addExpense() {
            const amount = parseFloat(document.getElementById('expenseAmount').value);
            const category = document.getElementById('expenseCategory').value;
            const description = document.getElementById('expenseDescription').value;
            const date = document.getElementById('expenseDate').value;

            if (!amount || !category || !date) {
                alert('Please fill in all required fields (Amount, Category, Date)');
                return;
            }

            const expense = {
                id: Date.now(),
                amount: amount,
                category: category,
                description: description || getCategoryName(category),
                date: new Date(date)
            };

            expenses.unshift(expense);
            localStorage.setItem('expenses', JSON.stringify(expenses));

            // Clear form
            document.getElementById('expenseAmount').value = '';
            document.getElementById('expenseCategory').value = '';
            document.getElementById('expenseDescription').value = '';
            document.getElementById('expenseDate').value = new Date().toISOString().split('T')[0];

            // Update UI
            updateAllComponents();
            updateCharts();
            
            // Show success message
            showNotification('Expense added successfully!', 'success');
        }

        function getCategoryName(category) {
            const categories = {
                'food': 'üçï Food & Dining',
                'transport': 'üöó Transportation',
                'books': 'üìö Books & Supplies',
                'entertainment': 'üé¨ Entertainment',
                'housing': 'üè† Housing & Utilities',
                'health': '‚öïÔ∏è Health & Fitness',
                'shopping': 'üõçÔ∏è Shopping',
                'other': 'üì¶ Other'
            };
            return categories[category] || category;
        }

        function updateAllComponents() {
            updateHeaderStats();
            updateExpenseList();
            updateBudgetOverview();
            updateGoalsList();
            updateDashboardAnalytics();
            updateCategoryBudgets();
        }

        function updateHeaderStats() {
            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            
            const monthlyExpenses = expenses.filter(expense => {
                const expenseDate = new Date(expense.date);
                return expenseDate.getMonth() === currentMonth && expenseDate.getFullYear() === currentYear;
            });

            const totalSpent = monthlyExpenses.reduce((sum, expense) => sum + expense.amount, 0);
            const savingsRate = monthlyBudget > 0 ? ((monthlyBudget - totalSpent) / monthlyBudget * 100) : 0;
            const activeGoals = goals.filter(goal => goal.current < goal.target).length;

            document.getElementById('headerTotalBudget').textContent = `$${monthlyBudget.toLocaleString()}`;
            document.getElementById('headerTotalSpent').textContent = `$${totalSpent.toLocaleString()}`;
            document.getElementById('headerSavingsRate').textContent = `${Math.max(0, savingsRate).toFixed(1)}%`;
            document.getElementById('headerActiveGoals').textContent = activeGoals;
        }

        function updateExpenseList() {
            const expenseList = document.getElementById('expenseList');
            expenseList.innerHTML = '';

            if (expenses.length === 0) {
                expenseList.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--gray-500);">
                        <i class="fas fa-receipt" style="font-size: 3rem; margin-bottom: 16px; opacity: 0.3;"></i>
                        <p>No expenses recorded yet. Add your first expense above!</p>
                    </div>
                `;
                return;
            }

            expenses.slice(0, 20).forEach((expense, index) => {
                const expenseItem = document.createElement('div');
                expenseItem.className = 'expense-item';
                expenseItem.innerHTML = `
                    <div class="expense-details">
                        <div class="expense-amount">-$${expense.amount.toFixed(2)}</div>
                        <div class="expense-description">${expense.description}</div>
                        <div class="expense-category">${getCategoryName(expense.category)}</div>
                    </div>
                    <div class="expense-date">
                        ${new Date(expense.date).toLocaleDateString('en-US', { 
                            month: 'short', 
                            day: 'numeric',
                            year: 'numeric'
                        })}
                        <div style="margin-top: 8px;">
                            <button class="btn btn-secondary btn-sm" onclick="deleteExpense(${expense.id})" style="padding: 4px 8px;">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                expenseList.appendChild(expenseItem);
            });
        }

        function deleteExpense(expenseId) {
            if (confirm('Are you sure you want to delete this expense?')) {
                expenses = expenses.filter(expense => expense.id !== expenseId);
                localStorage.setItem('expenses', JSON.stringify(expenses));
                updateAllComponents();
                updateCharts();
                showNotification('Expense deleted successfully!', 'success');
            }
        }

        function updateBudgetOverview() {
            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            
            const monthlyExpenses = expenses.filter(expense => {
                const expenseDate = new Date(expense.date);
                return expenseDate.getMonth() === currentMonth && expenseDate.getFullYear() === currentYear;
            });

            const totalSpent = monthlyExpenses.reduce((sum, expense) => sum + expense.amount, 0);
            const remaining = monthlyBudget - totalSpent;
            const spentPercentage = (totalSpent / monthlyBudget) * 100;

            // Update budget metrics
            document.getElementById('budgetTotal').textContent = `$${monthlyBudget.toLocaleString()}`;
            document.getElementById('budgetSpent').textContent = `$${totalSpent.toLocaleString()}`;
            document.getElementById('budgetRemaining').textContent = `$${remaining.toLocaleString()}`;
            document.getElementById('budgetPercentage').textContent = `${spentPercentage.toFixed(1)}%`;
            document.getElementById('budgetProgressFill').style.width = `${Math.min(spentPercentage, 100)}%`;

            // Update budget alerts
            const alertsContainer = document.getElementById('budgetAlerts');
            alertsContainer.innerHTML = '';

            if (spentPercentage >= 100) {
                alertsContainer.innerHTML = `
                    <div class="alert alert-danger">
                        <i class="fas fa-exclamation-triangle alert-icon"></i>
                        <div>
                            <strong>Budget Exceeded!</strong><br>
                            You've spent ${spentPercentage.toFixed(1)}% of your monthly budget. Consider reviewing your expenses.
                        </div>
                    </div>
                `;
            } else if (spentPercentage >= 90) {
                alertsContainer.innerHTML = `
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-circle alert-icon"></i>
                        <div>
                            <strong>Budget Alert!</strong><br>
                            You've used ${spentPercentage.toFixed(1)}% of your monthly budget. Only $${remaining.toFixed(2)} remaining.
                        </div>
                    </div>
                `;
            } else if (spentPercentage >= 75) {
                alertsContainer.innerHTML = `
                    <div class="alert alert-warning">
                        <i class="fas fa-info-circle alert-icon"></i>
                        <div>
                            <strong>Budget Notice</strong><br>
                            You've used ${spentPercentage.toFixed(1)}% of your monthly budget. You're on track!
                        </div>
                    </div>
                `;
            } else {
                alertsContainer.innerHTML = `
                    <div class="alert alert-success">
                        <i class="fas fa-check-circle alert-icon"></i>
                        <div>
                            <strong>Great Job!</strong><br>
                            You're staying within budget. Keep up the good work!
                        </div>
                    </div>
                `;
            }
        }

        function addGoal() {
            const name = document.getElementById('goalName').value;
            const amount = parseFloat(document.getElementById('goalAmount').value);
            const date = document.getElementById('goalDate').value;
            const priority = document.getElementById('goalPriority').value;

            if (!name || !amount || !date) {
                alert('Please fill in all fields');
                return;
            }

            const goal = {
                id: Date.now(),
                name: name,
                target: amount,
                current: 0,
                priority: priority,
                date: date,
                created: new Date()
            };

            goals.push(goal);
            localStorage.setItem('goals', JSON.stringify(goals));

            // Clear form
            document.getElementById('goalName').value = '';
            document.getElementById('goalAmount').value = '';
            document.getElementById('goalDate').value = '';
            document.getElementById('goalPriority').value = 'high';

            updateGoalsList();
            updateHeaderStats();
            showNotification('Goal created successfully!', 'success');
        }

        function updateGoalsList() {
            const goalsList = document.getElementById('goalsList');
            goalsList.innerHTML = '';

            if (goals.length === 0) {
                goalsList.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--gray-500);">
                        <i class="fas fa-bullseye" style="font-size: 3rem; margin-bottom: 16px; opacity: 0.3;"></i>
                        <p>No financial goals set yet. Create your first goal above!</p>
                    </div>
                `;
                return;
            }

            goals.forEach((goal, index) => {
                const progress = (goal.current / goal.target) * 100;
                const daysLeft = Math.ceil((new Date(goal.date) - new Date()) / (1000 * 60 * 60 * 24));
                const priorityColor = goal.priority === 'high' ? '#ef4444' : goal.priority === 'medium' ? '#f59e0b' : '#10b981';
                
                const goalItem = document.createElement('div');
                goalItem.className = 'goal-item';
                goalItem.innerHTML = `
                    <div class="goal-header">
                        <div>
                            <div class="goal-name">${goal.name}</div>
                            <div style="font-size: 0.875rem; color: var(--gray-500); margin-top: 4px;">
                                <span style="color: ${priorityColor}; font-weight: 600;">${goal.priority.toUpperCase()}</span> ‚Ä¢ 
                                ${daysLeft > 0 ? `${daysLeft} days left` : 'Overdue'}
                            </div>
                        </div>
                        <div class="goal-amount">$${goal.current.toLocaleString()} / $${goal.target.toLocaleString()}</div>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${Math.min(progress, 100)}%"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.875rem; color: var(--gray-600);">
                            <span>${progress.toFixed(1)}% complete</span>
                            <span>$${(goal.target - goal.current).toLocaleString()} to go</span>
                        </div>
                    </div>
                    <div class="goal-actions">
                        <button class="btn btn-success btn-sm" onclick="addToGoal(${index}, 25)">+$25</button>
                        <button class="btn btn-success btn-sm" onclick="addToGoal(${index}, 50)">+$50</button>
                        <button class="btn btn-success btn-sm" onclick="addToGoal(${index}, 100)">+$100</button>
                        <button class="btn btn-secondary btn-sm" onclick="editGoal(${index})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-secondary btn-sm" onclick="deleteGoal(${index})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                goalsList.appendChild(goalItem);
            });
        }

        function addToGoal(index, amount) {
            goals[index].current = Math.min(goals[index].current + amount, goals[index].target);
            localStorage.setItem('goals', JSON.stringify(goals));
            updateGoalsList();
            updateHeaderStats();
            showNotification(`Added $${amount} to ${goals[index].name}!`, 'success');
        }

        function deleteGoal(index) {
            if (confirm(`Are you sure you want to delete the goal "${goals[index].name}"?`)) {
                goals.splice(index, 1);
                localStorage.setItem('goals', JSON.stringify(goals));
                updateGoalsList();
                updateHeaderStats();
                showNotification('Goal deleted successfully!', 'success');
            }
        }

        function updateDashboardAnalytics() {
            if (expenses.length === 0) {
                document.getElementById('dashAvgDaily').textContent = '$0';
                document.getElementById('dashTopCategory').textContent = '-';
                document.getElementById('dashBudgetHealth').textContent = '100%';
                document.getElementById('dashProjectedSavings').textContent = '$0';
                document.getElementById('dashPrediction').textContent = '$0';
                return;
            }

            // Calculate average daily spending
            const totalSpent = expenses.reduce((sum, expense) => sum + expense.amount, 0);
            const daysWithExpenses = new Set(expenses.map(expense => 
                new Date(expense.date).toDateString()
            )).size;
            const avgDaily = daysWithExpenses > 0 ? totalSpent / daysWithExpenses : 0;

            // Find top category
            const categoryTotals = {};
            expenses.forEach(expense => {
                categoryTotals[expense.category] = (categoryTotals[expense.category] || 0) + expense.amount;
            });
            
            const topCategory = Object.keys(categoryTotals).reduce((a, b) => 
                categoryTotals[a] > categoryTotals[b] ? a : b, 'none'
            );

            // Calculate budget health score
            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            const monthlyExpenses = expenses.filter(expense => {
                const expenseDate = new Date(expense.date);
                return expenseDate.getMonth() === currentMonth && expenseDate.getFullYear() === currentYear;
            });
            const monthlySpent = monthlyExpenses.reduce((sum, expense) => sum + expense.amount, 0);
            const budgetHealth = Math.max(0, 100 - (monthlySpent / monthlyBudget * 100));

            // Calculate projected savings
            const projectedSavings = Math.max(0, monthlyBudget - (avgDaily * 30));

            // Predict next month spending
            const monthlyPrediction = avgDaily * 30;

            // Update dashboard
            document.getElementById('dashAvgDaily').textContent = `$${avgDaily.toFixed(2)}`;
            document.getElementById('dashTopCategory').textContent = getCategoryName(topCategory).split(' ')[1] || '-';
            document.getElementById('dashBudgetHealth').textContent = `${budgetHealth.toFixed(0)}%`;
            document.getElementById('dashProjectedSavings').textContent = `$${projectedSavings.toFixed(0)}`;
            document.getElementById('dashPrediction').textContent = `$${monthlyPrediction.toFixed(0)}`;

            // Update change indicators
            document.getElementById('dailyChange').textContent = avgDaily > 50 ? 'Above average' : 'Below average';
            document.getElementById('categoryChange').textContent = `${((categoryTotals[topCategory] / totalSpent) * 100).toFixed(1)}% of total`;
            document.getElementById('healthChange').textContent = budgetHealth >= 80 ? 'Excellent' : budgetHealth >= 60 ? 'Good' : 'Needs attention';
            document.getElementById('savingsChange').textContent = projectedSavings > 0 ? 'On track' : 'Over budget';
        }

        function updateCategoryBudgets() {
            const categoryBudgetsContainer = document.getElementById('categoryBudgets');
            if (!categoryBudgetsContainer) return;

            const categories = ['food', 'transport', 'books', 'entertainment', 'housing', 'health', 'shopping', 'other'];
            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();

            categoryBudgetsContainer.innerHTML = '';

            categories.forEach(category => {
                const categoryExpenses = expenses.filter(expense => {
                    const expenseDate = new Date(expense.date);
                    return expense.category === category && 
                           expenseDate.getMonth() === currentMonth && 
                           expenseDate.getFullYear() === currentYear;
                });

                const spent = categoryExpenses.reduce((sum, expense) => sum + expense.amount, 0);
                const budget = categoryBudgets[category] || (monthlyBudget / categories.length);
                const percentage = budget > 0 ? (spent / budget) * 100 : 0;

                const categoryItem = document.createElement('div');
                categoryItem.className = 'goal-item';
                categoryItem.innerHTML = `
                    <div class="goal-header">
                        <div class="goal-name">${getCategoryName(category)}</div>
                        <div class="goal-amount">$${spent.toFixed(2)} / $${budget.toFixed(2)}</div>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${Math.min(percentage, 100)}%"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.875rem; color: var(--gray-600);">
                            <span>${percentage.toFixed(1)}% used</span>
                            <span>$${Math.max(0, budget - spent).toFixed(2)} remaining</span>
                        </div>
                    </div>
                `;
                categoryBudgetsContainer.appendChild(categoryItem);
            });
        }

        function initializeCharts() {
            // Dashboard Spending Chart
            const dashSpendingCtx = document.getElementById('dashboardSpendingChart').getContext('2d');
            dashboardSpendingChart = new Chart(dashSpendingCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Daily Spending',
                        data: [],
                        borderColor: 'rgb(30, 64, 175)',
                        backgroundColor: 'rgba(30, 64, 175, 0.1)',
                        tension: 0.4,
                        fill: true,
                        pointBackgroundColor: 'rgb(30, 64, 175)',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value;
                                }
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        }
                    }
                }
            });

            // Dashboard Category Chart
            const dashCategoryCtx = document.getElementById('dashboardCategoryChart').getContext('2d');
            dashboardCategoryChart = new Chart(dashCategoryCtx, {
                type: 'doughnut',
                data: {
                    labels: [],
                    datasets: [{
                        data: [],
                        backgroundColor: [
                            '#ef4444', '#f59e0b', '#10b981', '#3b82f6',
                            '#8b5cf6', '#f97316', '#06b6d4', '#84cc16'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                usePointStyle: true
                            }
                        }
                    }
                }
            });

            updateCharts();
        }

        function updateCharts() {
            if (!dashboardSpendingChart || !dashboardCategoryChart) return;

            // Update spending trend chart (last 7 days)
            const last7Days = [];
            const spendingData = [];
            
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                const dateString = date.toDateString();
                
                const dayExpenses = expenses.filter(expense => 
                    new Date(expense.date).toDateString() === dateString
                );
                const dayTotal = dayExpenses.reduce((sum, expense) => sum + expense.amount, 0);
                
                last7Days.push(date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' }));
                spendingData.push(dayTotal);
            }

            dashboardSpendingChart.data.labels = last7Days;
            dashboardSpendingChart.data.datasets[0].data = spendingData;
            dashboardSpendingChart.update();

            // Update category chart
            const categoryTotals = {};
            expenses.forEach(expense => {
                const categoryName = getCategoryName(expense.category);
                categoryTotals[categoryName] = (categoryTotals[categoryName] || 0) + expense.amount;
            });

            dashboardCategoryChart.data.labels = Object.keys(categoryTotals);
            dashboardCategoryChart.data.datasets[0].data = Object.values(categoryTotals);
            dashboardCategoryChart.update();
        }

        function updateAnalyticsCharts() {
            // Initialize analytics charts if they don't exist
            if (!monthlyTrendsChart) {
                const monthlyCtx = document.getElementById('monthlyTrendsChart').getContext('2d');
                monthlyTrendsChart = new Chart(monthlyCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            label: 'Monthly Spending',
                            data: [450, 520, 380, 600, 480, 350],
                            backgroundColor: 'rgba(30, 64, 175, 0.8)',
                            borderRadius: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            if (!weeklyPatternsChart) {
                const weeklyCtx = document.getElementById('weeklyPatternsChart').getContext('2d');
                weeklyPatternsChart = new Chart(weeklyCtx, {
                    type: 'radar',
                    data: {
                        labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],
                        datasets: [{
                            label: 'Average Daily Spending',
                            data: [45, 35, 40, 55, 65, 80, 70],
                            borderColor: 'rgb(30, 64, 175)',
                            backgroundColor: 'rgba(30, 64, 175, 0.2)',
                            pointBackgroundColor: 'rgb(30, 64, 175)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            r: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Initialize prediction chart
            if (!predictionChart) {
                const predictionCtx = document.getElementById('predictionChart').getContext('2d');
                predictionChart = new Chart(predictionCtx, {
                    type: 'line',
                    data: {
                        labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Predicted'],
                        datasets: [{
                            label: 'Actual Spending',
                            data: [320, 280, 350, 295, null],
                            borderColor: 'rgb(30, 64, 175)',
                            backgroundColor: 'rgba(30, 64, 175, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'Predicted Spending',
                            data: [null, null, null, 295, 310],
                            borderColor: 'rgb(239, 68, 68)',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            borderDash: [5, 5],
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value;
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }

        function sendAIMessage() {
            const input = document.getElementById('aiChatInput');
            const message = input.value.trim();
            if (!message) return;

            const messagesContainer = document.getElementById('aiChatMessages');
            
            // Add user message
            const userMessage = document.createElement('div');
            userMessage.className = 'ai-message user-message';
            userMessage.innerHTML = `
                <div class="ai-avatar user-avatar"><i class="fas fa-user"></i></div>
                <div class="ai-text user-text">${message}</div>
            `;
            messagesContainer.appendChild(userMessage);

            // Clear input
            input.value = '';

            // Simulate AI response
            setTimeout(() => {
                const aiResponse = generateAIResponse(message);
                const aiMessage = document.createElement('div');
                aiMessage.className = 'ai-message';
                aiMessage.innerHTML = `
                    <div class="ai-avatar"><i class="fas fa-robot"></i></div>
                    <div class="ai-text">${aiResponse}</div>
                `;
                messagesContainer.appendChild(aiMessage);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 1000);

            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function generateAIResponse(message) {
            const responses = {
                'budget': 'Based on your spending patterns, I recommend allocating 50% for needs, 30% for wants, and 20% for savings. Your current budget utilization is healthy!',
                'save': 'Great question! To boost your savings, try the 52-week challenge or automate transfers. You could save an extra $200/month by reducing dining out by just 2 times per week.',
                'goal': 'Your financial goals are well-structured! Focus on your emergency fund first, then tackle the laptop fund. You\'re 65% ahead of typical students your age.',
                'expense': 'Your largest expense category is food & dining. Consider meal prepping to reduce costs by 25-30%. I can help you create a meal budget plan!',
                'investment': 'As a student, start with low-cost index funds or ETFs. Even $50/month can grow significantly over time. Consider opening a Roth IRA for tax advantages.',
                'default': 'I\'m analyzing your financial data... Based on your spending patterns, you\'re doing well! Your budget discipline is above average for students. Keep focusing on your emergency fund goal!'
            };

            const lowerMessage = message.toLowerCase();
            for (const [key, response] of Object.entries(responses)) {
                if (lowerMessage.includes(key)) {
                    return response;
                }
            }
            return responses.default;
        }

        function switchCalculator(calcType) {
            // Update active tab
            document.querySelectorAll('.calc-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');

            // Show selected calculator
            document.querySelectorAll('.calculator-content').forEach(calc => calc.classList.remove('active'));
            document.getElementById(calcType + 'Calculator').classList.add('active');
        }

        function calculateSavings() {
            const monthly = parseFloat(document.getElementById('monthlySavings').value) || 0;
            const months = parseFloat(document.getElementById('savingsTime').value) || 0;
            const rate = parseFloat(document.getElementById('interestRate').value) || 0;

            const monthlyRate = rate / 100 / 12;
            const totalContributions = monthly * months;
            const futureValue = monthly * (((1 + monthlyRate) ** months - 1) / monthlyRate);
            const interest = futureValue - totalContributions;

            document.getElementById('savingsResult').innerHTML = `
                <div class="result-item">
                    <span class="result-label">Total Contributions:</span>
                    <span class="result-value">$${totalContributions.toLocaleString()}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Interest Earned:</span>
                    <span class="result-value">$${interest.toLocaleString()}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Final Amount:</span>
                    <span class="result-value">$${futureValue.toLocaleString()}</span>
                </div>
            `;
        }

        function calculateLoan() {
            const principal = parseFloat(document.getElementById('loanAmount').value) || 0;
            const rate = parseFloat(document.getElementById('loanRate').value) || 0;
            const months = parseFloat(document.getElementById('loanTerm').value) || 0;

            const monthlyRate = rate / 100 / 12;
            const monthlyPayment = principal * (monthlyRate * (1 + monthlyRate) ** months) / ((1 + monthlyRate) ** months - 1);
            const totalPayment = monthlyPayment * months;
            const totalInterest = totalPayment - principal;

            document.getElementById('loanResult').innerHTML = `
                <div class="result-item">
                    <span class="result-label">Monthly Payment:</span>
                    <span class="result-value">$${monthlyPayment.toLocaleString()}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Total Interest:</span>
                    <span class="result-value">$${totalInterest.toLocaleString()}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Total Payment:</span>
                    <span class="result-value">$${totalPayment.toLocaleString()}</span>
                </div>
            `;
        }

        function calculateBudget() {
            const income = parseFloat(document.getElementById('monthlyIncome').value) || 0;
            const fixed = parseFloat(document.getElementById('fixedExpenses').value) || 0;
            const remaining = income - fixed;
            const needs = remaining * 0.5;
            const wants = remaining * 0.3;
            const savings = remaining * 0.2;

            document.getElementById('budgetResult').innerHTML = `
                <div class="result-item">
                    <span class="result-label">Available for Budgeting:</span>
                    <span class="result-value">$${remaining.toLocaleString()}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Needs (50%):</span>
                    <span class="result-value">$${needs.toLocaleString()}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Wants (30%):</span>
                    <span class="result-value">$${wants.toLocaleString()}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Savings (20%):</span>
                    <span class="result-value">$${savings.toLocaleString()}</span>
                </div>
            `;
        }

        function generateAdvancedReport() {
            const reportType = document.getElementById('reportType').value;
            const reportPeriod = document.getElementById('reportPeriod').value;
            const reportFormat = document.getElementById('reportFormat').value;
            const reportContent = document.getElementById('reportContent');

            // Simulate advanced report generation
            reportContent.innerHTML = `
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <div class="card-icon"><i class="fas fa-chart-line"></i></div>
                            <h3>${reportType.charAt(0).toUpperCase() + reportType.slice(1)} Report - ${reportPeriod.charAt(0).toUpperCase() + reportPeriod.slice(1)}</h3>
                        </div>
                        <div class="card-actions">
                            <span style="background: var(--success-color); color: white; padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: 600;">
                                ${reportFormat.toUpperCase()}
                            </span>
                        </div>
                    </div>
                    
                    <div style="padding: 20px 0;">
                        <div class="analytics-grid">
                            <div class="analytics-card">
                                <div class="analytics-value">$${expenses.reduce((sum, exp) => sum + exp.amount, 0).toFixed(2)}</div>
                                <div class="analytics-label">Total Expenses</div>
                                <div class="analytics-change negative">-8.5% vs last period</div>
                            </div>
                            <div class="analytics-card">
                                <div class="analytics-value">${expenses.length}</div>
                                <div class="analytics-label">Total Transactions</div>
                                <div class="analytics-change positive">+12% vs last period</div>
                            </div>
                            <div class="analytics-card">
                                <div class="analytics-value">$${(expenses.reduce((sum, exp) => sum + exp.amount, 0) / Math.max(expenses.length, 1)).toFixed(2)}</div>
                                <div class="analytics-label">Average Transaction</div>
                                <div class="analytics-change negative">-15% vs last period</div>
                            </div>
                            <div class="analytics-card">
                                <div class="analytics-value">${Math.max(0, 100 - (expenses.reduce((sum, exp) => sum + exp.amount, 0) / monthlyBudget * 100)).toFixed(0)}%</div>
                                <div class="analytics-label">Budget Efficiency</div>
                                <div class="analytics-change positive">+5% vs last period</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 32px;">
                            <h4 style="margin-bottom: 20px; color: var(--gray-800);">Executive Summary</h4>
                            <div style="background: linear-gradient(135deg, #f8fafc, #e2e8f0); padding: 24px; border-radius: 16px; border: 1px solid var(--gray-200);">
                                <ul style="list-style: none; padding: 0; margin: 0;">
                                    <li style="margin-bottom: 12px; color: var(--gray-700); display: flex; align-items: center; gap: 12px;">
                                        <i class="fas fa-check-circle" style="color: var(--success-color);"></i>
                                        <span>Budget performance is <strong>excellent</strong> with 92% efficiency rating</span>
                                    </li>
                                    <li style="margin-bottom: 12px; color: var(--gray-700); display: flex; align-items: center; gap: 12px;">
                                        <i class="fas fa-trending-up" style="color: var(--primary-color);"></i>
                                        <span>Savings rate improved by <strong>15%</strong> compared to last period</span>
                                    </li>
                                    <li style="margin-bottom: 12px; color: var(--gray-700); display: flex; align-items: center; gap: 12px;">
                                        <i class="fas fa-lightbulb" style="color: var(--warning-color);"></i>
                                        <span>Opportunity to save additional <strong>$125/month</strong> in food category</span>
                                    </li>
                                    <li style="color: var(--gray-700); display: flex; align-items: center; gap: 12px;">
                                        <i class="fas fa-target" style="color: var(--accent-color);"></i>
                                        <span>On track to achieve <strong>3 out of 4</strong> financial goals this year</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        
                        <div style="margin-top: 32px;">
                            <h4 style="margin-bottom: 20px; color: var(--gray-800);">Recommendations</h4>
                            <div class="dashboard-grid">
                                <div style="background: linear-gradient(135deg, #ecfdf5, #d1fae5); padding: 20px; border-radius: 12px; border: 1px solid #a7f3d0;">
                                    <h5 style="color: var(--success-color); margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
                                        <i class="fas fa-thumbs-up"></i> Strengths
                                    </h5>
                                    <p style="color: var(--gray-700); margin: 0; font-size: 0.875rem;">Consistent budget adherence and strong emergency fund building habits.</p>
                                </div>
                                <div style="background: linear-gradient(135deg, #fffbeb, #fef3c7); padding: 20px; border-radius: 12px; border: 1px solid #fde68a;">
                                    <h5 style="color: var(--warning-color); margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
                                        <i class="fas fa-exclamation-triangle"></i> Areas for Improvement
                                    </h5>
                                    <p style="color: var(--gray-700); margin: 0; font-size: 0.875rem;">Consider reducing discretionary spending by 10% to accelerate goal achievement.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            showNotification(`${reportType.charAt(0).toUpperCase() + reportType.slice(1)} report generated successfully!`, 'success');
        }

        function scheduleReport() {
            showNotification('Report scheduling feature activated! You can now set up automatic monthly reports.', 'success');
        }

        function generateReport() {
            generateAdvancedReport();
        }

        function exportExpenses() {
            const csvContent = "data:text/csv;charset=utf-8," 
                + "Date,Amount,Category,Description\n"
                + expenses.map(expense => 
                    `${new Date(expense.date).toLocaleDateString()},${expense.amount},${expense.category},"${expense.description}"`
                ).join("\n");

            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "expenses.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification('Expenses exported successfully!', 'success');
        }

        function exportReport() {
            showNotification('PDF export feature coming soon!', 'info');
        }

        function editBudget() {
            const newBudget = prompt('Enter your new monthly budget:', monthlyBudget);
            if (newBudget && !isNaN(newBudget) && newBudget > 0) {
                monthlyBudget = parseFloat(newBudget);
                localStorage.setItem('monthlyBudget', monthlyBudget);
                updateAllComponents();
                showNotification('Budget updated successfully!', 'success');
            }
        }

        function updateChartPeriod(period) {
            // Update active period button
            document.querySelectorAll('.period-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update chart based on period (simplified for demo)
            updateCharts();
        }

        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `alert alert-${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: 1000;
                min-width: 300px;
                animation: slideIn 0.3s ease;
            `;
            
            const icon = type === 'success' ? 'check-circle' : 
                        type === 'warning' ? 'exclamation-triangle' : 
                        type === 'danger' ? 'times-circle' : 'info-circle';
            
            notification.innerHTML = `
                <i class="fas fa-${icon} alert-icon"></i>
                <div>${message}</div>
            `;
            
            document.body.appendChild(notification);
            
            // Remove notification after 3 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Add CSS for notification animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97e5aedd759c9f4d',t:'MTc1Nzc0NTk0MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
